plugins {
    id("com.github.johnrengelman.shadow") version "8.1.1"
    id("io.micronaut.application") version "4.2.1"
    id("io.micronaut.aot") version "4.2.1"
}

version = "0.1"
group = "com.example"

repositories {
    mavenCentral()
}

ext {
    slf4j_version = '1.7.32'
    logback_version = '1.4.12'
    lombok_version = '1.18.30'
    micronaut_version = '4.2.1'
}

dependencies {
    annotationProcessor "io.micronaut:micronaut-inject-java:$micronaut_version"
    implementation "io.micronaut:micronaut-inject:$micronaut_version"

    compileOnly "org.projectlombok:lombok:$lombok_version"
    annotationProcessor "org.projectlombok:lombok:$lombok_version"

    implementation "ch.qos.logback:logback-classic:$logback_version"
    implementation "org.slf4j:slf4j-api:$slf4j_version"
}


application {
    mainClass.set("com.example.Application")
}
java {
    sourceCompatibility = JavaVersion.toVersion("17")
    targetCompatibility = JavaVersion.toVersion("17")
}

tasks.register('runWithSchedule', JavaExec) {
    classpath = sourceSets.main.runtimeClasspath
    mainClass = 'com.example.Application'
    args '--schedule'
    outputs.upToDateWhen { false }
}